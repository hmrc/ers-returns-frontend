@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import utils.ERSUtil
@import config.ApplicationConfig
@import utils.CountryCodes
@(requestObject: RequestObject, groupSchemeActivity: String, index: Int, trusteeDetails: Form[models.TrusteeDetails])(implicit request: Request[AnyRef], flash: Flash, messages: Messages, countryCodes: CountryCodes, ersUtil: ERSUtil, appConfig: ApplicationConfig)

@import uk.gov.hmrc.play.views.html.helpers
@import views.html.helpers.error_overview
@import views.html.templates._

@schemeId = @{requestObject.getSchemeId}

@scripts = {
    <script src='@routes.Assets.at("javascripts/ers_company.js")'> </script>
}

@ers_main(title = messages("ers.add_trustee.page_title"), scripts) {

    @reference(requestObject.getPageTitle)
    <p class="font-xsmall"><a href="@ersUtil.getPageBackLink(schemeId, ersUtil.PAGE_TRUSTEE_DETAILS, groupSchemeActivity)" class="link-back">@Html(messages("ers.back"))</a></p>
    @if(trusteeDetails.hasErrors) {
        @helpers.errorSummary(messages("validation.summary.heading"), trusteeDetails)
    }
    @header(messages("ers_trustee_details.title"))
    @helpers.form(action = routes.TrusteeController.trusteeDetailsSubmit(index)) {
        <div class="form-group">
            <fieldset class="inline">
                <legend>
                    <span class="form-label">@messages("ers_trustee_details.question")</span>
                </legend>
                <div class="form-field">
                    <div class="multiple-choice">
                        <input id="uk-radio-button" name="radio-inline-group" value="1" type="radio" @if(trusteeDetails(trusteeDetailsFields.country).value.contains(ersUtil.DEFAULT_COUNTRY) || trusteeDetails(trusteeDetailsFields.country).value.isEmpty) {checked="checked"}>
                        <label class="@if(trusteeDetails(trusteeDetailsFields.country).value.contains(ersUtil.DEFAULT_COUNTRY) || trusteeDetails(trusteeDetailsFields.country).value.isEmpty) {selected}" for="uk-radio-button">@messages("ers_trustee_details.uk")</label>
                    </div>
                    <div class="multiple-choice">
                        <input id="overseas-radio-button" name="radio-inline-group" value="2" type="radio" @if(!trusteeDetails(trusteeDetailsFields.country).value.contains(ersUtil.DEFAULT_COUNTRY) && trusteeDetails(trusteeDetailsFields.country).value.isDefined) {checked="checked"}>
                        <label class="@if(!trusteeDetails(trusteeDetailsFields.country).value.contains(ersUtil.DEFAULT_COUNTRY) && trusteeDetails(trusteeDetailsFields.country).value.isDefined) {selected}" for="overseas-radio-button">@messages("ers_trustee_details.overseas")</label>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class='form-group'>
            @helpers.input(trusteeDetails(trusteeDetailsFields.name), '_label -> messages("ers_trustee_details.name"), '_inputClass -> "form-control form-control--block" )
        </div>
        <div class="form-group @if(trusteeDetails.error(trusteeDetailsFields.addressLine1).isDefined) {form-field--error}">
            <label for="addressLine1" class="form-label">
                <span>@messages("ers_trustee_details.address")</span>
                <span class="visuallyhidden">@messages("ers_trustee_details.addressLine1")</span>
                @if(trusteeDetails.error(trusteeDetailsFields.addressLine1).isDefined) {<span class="error-notification" role="tooltip">@trusteeDetails.errors(trusteeDetailsFields.addressLine1).head.message</span>}
                <input id="addressLine1" type="text" class="form-control form-control--block" name="addressLine1" value="@trusteeDetails(trusteeDetailsFields.addressLine1).value">
            </label>
        </div>
        <div class="form-group">
            @helpers.input(trusteeDetails(trusteeDetailsFields.addressLine2), '_label -> messages("ers_trustee_details.addressLine2"), '_labelTextClass -> "visuallyhidden", '_inputClass -> "form-control form-control--block" )
        </div>
        <div class="form-group">
            @helpers.input(trusteeDetails(trusteeDetailsFields.addressLine3), '_label -> messages("ers_trustee_details.addressLine3"), '_labelTextClass -> "visuallyhidden", '_inputClass -> "form-control form-control--block" )
        </div>
        <div class="form-group">
            @helpers.input(trusteeDetails(trusteeDetailsFields.addressLine4), '_label -> messages("ers_trustee_details.addressLine4"), '_labelTextClass -> "visuallyhidden", '_inputClass -> "form-control form-control--block" )
        </div>
        <div class="form-group postcode-group @if(trusteeDetails.error(trusteeDetailsFields.postcode).isDefined) {form-field--error}">
            <label for="postcode" class="form-label" id="postcodeLbl">
                @if(trusteeDetails(trusteeDetailsFields.country).value.contains(ersUtil.DEFAULT_COUNTRY) || trusteeDetails(trusteeDetailsFields.country).value.isEmpty) {@messages("ers_trustee_details.postcode")} else {@messages("ers_trustee_details.postcode_zipcode")}
            </label>
            @if(trusteeDetails.error(trusteeDetailsFields.postcode).isDefined) {<span class="error-notification">@trusteeDetails.errors(trusteeDetailsFields.postcode).head.message.</span>}
            <input id="postcode" type="text" class="form-control" name="postcode" value="@trusteeDetails(trusteeDetailsFields.postcode).value">
        </div>
        <div class="form-group country-group">
            <label for="country" class="form-label" id="countryLbl">@messages("ers_trustee_details.country")</label>
            @views.html.includes.countries(trusteeDetails(trusteeDetailsFields.country).value)
        </div>
        <input role="button" id="continue" class="button" type="submit" value="@Html(messages("ers.continue"))" >
    }
}
